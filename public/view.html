<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Master Prompt | Shared Strategy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter'], mono: ['JetBrains Mono'] },
                    animation: { 'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite' }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #030014;
            color: #fff;
        }

        .hud-card {
            background: rgba(13, 14, 28, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
        }

        .prose h1,
        .prose h2,
        .prose h3 {
            color: white;
            margin-bottom: 0.5em;
            font-weight: 700;
            margin-top: 1em;
        }

        .prose p {
            color: #9ca3af;
            margin-bottom: 1em;
        }

        .prose strong {
            color: white;
        }

        .prose ul {
            list-style: disc;
            margin-left: 1.5em;
            color: #9ca3af;
        }

        pre {
            background: #1e1e2e;
            padding: 1em;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 1em;
            position: relative;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-size: 0.75rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }
    </style>
</head>

<body class="antialiased font-sans min-h-screen flex flex-col items-center py-10 px-4">

    <!-- Header -->
    <header class="max-w-4xl w-full mb-8 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div
                class="w-10 h-10 bg-indigo-500/10 rounded-lg border border-indigo-500/20 flex items-center justify-center">
                <i class="ph-bold ph-strategy text-indigo-400 text-xl"></i>
            </div>
            <div>
                <h1 class="text-xl font-bold tracking-tight">Master Prompt v8.0</h1>
                <p class="text-xs text-gray-500 font-mono">SHARED STRATEGY VIEW</p>
            </div>
        </div>
        <a href="/" class="text-xs font-mono text-indigo-400 hover:text-white transition flex items-center gap-2">
            Create Your Own <i class="ph-bold ph-arrow-right"></i>
        </a>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl w-full space-y-6">

        <!-- Status -->
        <div class="hud-card rounded-xl p-4 flex justify-between items-center" id="status-bar">
            <div class="flex items-center gap-3">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-xs font-mono text-gray-400">Verified Output</span>
            </div>
            <span class="text-xs font-mono text-gray-500" id="date-display">...</span>
        </div>

        <!-- Problem Context -->
        <div class="hud-card rounded-2xl p-6 border-l-4 border-gray-600">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Original Vector</h3>
            <p class="text-gray-200 text-sm leading-relaxed font-mono" id="problem-content">Loading...</p>
        </div>

        <!-- Solution -->
        <div class="hud-card rounded-2xl p-8 border-t-4 border-indigo-500/50">
            <h3 class="text-xs font-bold text-indigo-400 uppercase tracking-widest mb-6 flex items-center gap-2">
                <i class="ph-fill ph-cpu"></i> AI Strategic Output
            </h3>
            <div id="solution-content" class="prose prose-invert max-w-none text-sm md:text-base">
                <div class="animate-pulse space-y-4">
                    <div class="h-4 bg-white/5 rounded w-3/4"></div>
                    <div class="h-4 bg-white/5 rounded w-1/2"></div>
                    <div class="h-4 bg-white/5 rounded w-5/6"></div>
                </div>
            </div>
        </div>

    </main>

    <footer class="mt-12 text-center text-xs text-gray-600 font-mono">
        SECURED BY ETHEREUM â€¢ MASTER PROMPT DAO
    </footer>

    <script>
        async function loadContent() {
            const urlParams = new URLSearchParams(window.location.search);
            const uuid = urlParams.get('id');

            if (!uuid) {
                document.getElementById('solution-content').innerHTML = '<p class="text-red-400">Error: Missing Share ID</p>';
                return;
            }

            try {
                const res = await fetch(`/api/share/${uuid}`);
                if (!res.ok) throw new Error("Content not found");

                const data = await res.json();

                document.getElementById('problem-content').innerText = data.problem;
                document.getElementById('date-display').innerText = new Date(data.date).toLocaleString();

                // Markdown Parse
                document.getElementById('solution-content').innerHTML = marked.parse(
                    (typeof data.solution === 'string' ? data.solution : JSON.stringify(data.solution, null, 2))
                );

                // Copy Code Logic
                document.querySelectorAll('pre code').forEach((block) => {
                    const pre = block.parentElement;
                    const btn = document.createElement('button');
                    btn.className = 'copy-btn';
                    btn.innerText = 'Copy';
                    btn.onclick = () => {
                        navigator.clipboard.writeText(block.innerText);
                        btn.innerText = 'Copied!';
                        setTimeout(() => btn.innerText = 'Copy', 2000);
                    };
                    pre.appendChild(btn);
                });

            } catch (e) {
                document.getElementById('solution-content').innerHTML = '<p class="text-red-400 font-mono">Error: Link expired or invalid.</p>';
                document.getElementById('problem-content').innerText = "---";
            }
        }
        loadContent();
    </script>
</body>

</html>